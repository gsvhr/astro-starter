---
import Layout from '../components/Layout.astro';
import ArticleCard from '../components/ArticleCard.astro';

import { getCollection } from 'astro:content';

const blogPosts = await getCollection('blog');

// Преобразуем данные из content/blog в формат, совместимый с ArticleCard
const articles = blogPosts.map((post) => ({
	slug: post.data.slug,
	title: post.data.title,
	description: post.data.description,
	date: new Date(post.data.date),
	category: post.data.category
}));
---

<Layout>
	<main class="py-16">
		<div class="container mx-auto px-4">
			<h1 class="text-3xl font-bold mb-8">Блог</h1>
			
			<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
				{
					articles.map((article: any) => (
						<ArticleCard article={article} />
					))
				}
			</div>
		</div>
	</main>
</Layout>